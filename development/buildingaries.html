<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd";>
<!--
    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements. See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License. You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
<html>
  <head>
    <link rel="shortcut icon" href="http://aries.apache.org/images/favicon.ico"></link>
    <link type="text/css" rel="stylesheet" href="http://aries.apache.org/resources/site.css"></link>
    </script><script src="http://aries.apache.org/resources/menus.js" language="javascript" type="text/javascript"></script>
  <meta name="keywords" content="..."/>
  <meta name="description" content="..." />
    <title>
    Apache Aries - BuildingAries
    </title>
  </head>
<body onload="SetMenu()">

<table width="100%" cellpadding="0" cellspacing="0">
  <tr width="100%">
    <td id="cell-0-0" colspan="2">&nbsp;</td>
    <td id="cell-0-1">&nbsp;</td>
    <td id="cell-0-2" colspan="2">&nbsp;</td>
  </tr>
  <tr width="100%">
    <td id="cell-1-0">&nbsp;</td>
    <td id="cell-1-1">&nbsp;</td>
    <td id="cell-1-2">
      <div style="padding: 5px;">
        <div id="banner">
          <!-- Banner -->
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr>
          <td align="left" class="topbardiv" nowrap="">
            <a href="http://aries.apache.org/" title="Apache Aries"> <img border="0" src="http://aries.apache.org/images/Arieslogo_Horizontal.gif"> </a>
          </td>
          <td align="right" nowrap="">
            <a href="http://www.apache.org/" title="The Apache Software Foundation"> <img border="0" src="http://aries.apache.org/images/apache_feather.png"> </a>
              </td>
        </tr>
      </table>
          <!-- Banner -->
        </div>
      </div>
      <div id="top-menu">
        <table border="0" cellpadding="1" cellspacing="0" width="100%">
          <tr>
            <td>
              <div align="left">
                <!-- Breadcrumbs -->
                <!-- Breadcrumbs -->
              </div>
            </td>
            <td>
              <div align="right">
                <!-- Quicklinks -->
          <DIV style="padding: 5px 5px 0px 25px;">
            <FORM action="http://www.google.com/search" method="get" style="font-size: 10px;">
            <A href="http://www.apache.org/licenses/LICENSE-2.0.html" class="external-link" rel="nofollow">License</A> 
            <INPUT name="ie" type="hidden" value="UTF-8"></INPUT>
            <INPUT name="oe" type="hidden" value="UTF-8"></INPUT>
            <INPUT maxlength="255" name="q" size="15" type="text" value></INPUT>
            <INPUT name="btnG" type="submit" value="Search"></INPUT>
            <INPUT name="domains" type="hidden" value="aries.apache.org"></INPUT>
            <INPUT name="sitesearch" type="hidden" value="aries.apache.org"></INPUT>
            </FORM>
          </DIV>
                <!-- Quicklinks -->
              </div>
            </td>
          </tr>
        </table>
      </div>
    </td>
    <td id="cell-1-3">&nbsp;</td>
    <td id="cell-1-4">&nbsp;</td>
  </tr>
  <tr width="100%">
    <td id="cell-2-0" colspan="2">&nbsp;</td>
    <td id="cell-2-1">
      <table>
        <tr height="100%" valign="top">
          <td height="100%">
            <div id="wrapper-menu-page-right">
              <div id="wrapper-menu-page-top">
                <div id="wrapper-menu-page-bottom">
                  <div id="menu-page">
                    <!-- NavigationBar -->
          <div onclick="SwitchMenu('overview')" id="overviewTitle" class="menutitle">Overview</div>

<div id="overview" class="menuitemgroup">
    <div class="menuitem">
        <a href="/overview/boardreports.html">Board Reports</a> 
    </div>
    <div class="menuitem">
        <a href="/overview/news.html">News</a> 
    </div>
</div>

<div onclick="SwitchMenu('documentation')" id="documentationTitle" class="menutitle">Documentation</div>

<div id="documentation" class="menuitemgroup">
    <div class="menuitem">
        <a href="/documentation/ariesprogrammingmodel.html">Programming Model</a> 
    </div>
    <div class="menuitem">
        <a href="/documentation/pointerstoosgispecifications.html">Pointers to OSGi specs</a> 
    </div>
    <div class="menuitem">
        <a href="/documentation/integrators-guide.html">Integrators Guide</a> 
    </div>
        <div class="menuitem">
                <a href="/documentation/javadoc.html">Javadoc</a>
        </div>
    <div class="menuitem">
        <a href="/documentation/articles.html">Articles</a> 
    </div>
    <div class="menuitem">
        <a href="https://svn.apache.org/repos/asf/aries/slides/">Slides</a> 
    </div>
    <div class="menuitem">
        <a href="/documentation/tutorials.html">Tutorials</a> 
    </div>
    <div class="menuitem">
        <a href="/documentation/tools.html">Tools</a> 
    </div>
</div>

<div onclick="SwitchMenu('downloads')" id="downloadsTitle" class="menutitle">Downloads</div>

<div id="downloads" class="menuitemgroup">
    <div class="menuitem">
        <a href="/downloads/currentrelease.html">Current Release</a> 
    </div>
    <div class="menuitem">
        <a href="/downloads/testresults.html">Compliance Tests</a> 
    </div>
    <div class="menuitem">
        <a href="/downloads/releasenotes.html">Release Notes</a> 
    </div>
    <div class="menuitem">
        <a href="/downloads/archived-releases.html">Archived Releases</a> 
    </div>
</div>

<div onclick="SwitchMenu('community')" id="communityTitle" class="menutitle">Community</div>

<div id="community" class="menuitemgroup">
    <div class="menuitem">
        <a href="/community/overview.html">Community</a> 
    </div>
    <div class="menuitem">
        <a href="/community/gettinginvolved.html">Getting Involved</a> 
    </div>
    <div class="menuitem">
        <a href="/community/people.html">Who we are</a> 
    </div>
    <div class="menuitem">
        <a href="/community/mailinglists.html">Mailing lists</a> 
    </div>
    <div class="menuitem">
        <a href="http://blogs.apache.org/aries/">Aries Group Blog</a> 
    </div>
        <div class="menuitem">
                <a href="/community/logos.html">Logos for Users</a>
        </div>
</div>

<div onclick="SwitchMenu('development')" id="developmentTitle" class="menutitle">Development</div>

<div id="development" class="menuitemgroup">
    <div class="menuitem">
        <a href="https://svn.apache.org/repos/asf/aries/">Source Control</a> 
    </div>
    <div class="menuitem">
        <a href="https://issues.apache.org/jira/browse/ARIES">Bug Tracking</a> 
    </div>
    <div class="menuitem">
        <a href="/development/buildingaries.html">Building Aries </a> 
    </div>
    <div class="menuitem">
        <a href="/development/maven-best-practice-in-aries.html">Maven best practice</a> 
    </div>
    <div class="menuitem">
        <a href="/development/moduledependencies.html">Module Dependencies</a> 
    </div>
    <div class="menuitem">
        <a href="/development/releasingaries.html">Releasing Aries </a> 
    </div>
    <div class="menuitem">
        <a href="/development/verifyingrelease.html">Verifying Release artifacts</a> 
    </div>
    <div class="menuitem">
        <a href="/development/compliancetesting.html">OSGi Compliance Tests </a> 
    </div>
    <div class="menuitem">
        <a href="https://builds.apache.org/hudson/">Build System</a> 
    </div>
    <div class="menuitem">
        <a href="/development/maintainingthewebpages.html">Web Site Maintenance </a> 
    </div>
        <div class="menuitem">
        <a href="/development/versionpolicy.html">OSGi Version Policy </a> 
    </div>
</div>

<div onclick="SwitchMenu('modules')" id="modulesTitle" class="menutitle">Modules</div>

<div id="modules" class="menuitemgroup">
    <div class="menuitem">
        <a href="/modules/samples.html">Samples</a> 
    </div>
    <div class="menuitem">
        <a href="/modules/blueprint.html">Blueprint</a> 
    </div>
    <div class="menuitem">
        <a href="/modules/blueprintannotation.html">Blueprint Annotations</a>
    </div>
    <div class="menuitem">
        <a href="/modules/blueprintnoosgi.html">Blueprint No-OSGi</a>
    </div>
    <div class="menuitem">
        <a href="/modules/blueprintweb.html">Blueprint Web</a>
    </div>
    <div class="menuitem">
        <a href="/modules/jndiproject.html">JNDI</a> 
    </div>
    <div class="menuitem">
        <a href="/modules/jpaproject.html">JPA</a> 
    </div>
    <div class="menuitem">
        <a href="/modules/applications.html">Applications</a> 
    </div>
    <div class="menuitem">
        <a href="/modules/transactionsproject.html">Transactions</a> 
    </div>
    <div class="menuitem">
        <a href="/modules/ebamavenpluginproject.html">EBA Maven Plugin </a> 
    </div>
    <div class="menuitem">
        <a href="/modules/spi-fly.html">SPI Fly</a> 
    </div>
</div>

<div onclick="SwitchMenu('sponsorship')" id="sponsorshipTitle" class="menutitle">Sponsorship</div>

<div id="sponsorship" class="menuitemgroup">
    <div class="menuitem">
        <a href="http://www.apache.org/foundation/thanks.html">Thanks</a> 
    </div>
    <div class="menuitem">
        <a href="http://www.apache.org/foundation/sponsorship.html">Sponsoring Apache</a> 
    </div>
</div>
                    <!-- NavigationBar -->
                  </div>
                </div>
              </div>
            </div>
          </td>
          <td height="100%" width="100%">
            <!-- Content -->
            <div class="wiki-content"><p><a name="BuildingAries-ExtractingandbuildingAries"></a></p>
<h1 id="extracting-and-building-aries">Extracting and building Aries</h1>
<p>There are two ways to do this. The first avoids using the command line but
can leave you with some fixing up to do on the projects.</p>
<p><a name="BuildingAries-Prereqs"></a></p>
<h2 id="prereqs">Prereqs</h2>
<ul>
<li>Check that Maven is 2.0.10 or higher (mvn --version)</li>
<li>Download and extract eclipse-jee-ganymede-SR2-linux-gtk.tar.gz (this is
the 3.4 version)</li>
<li>Install Subversion client http://subclipse.tigris.org/update_1.6.x (Just
the Subclipse and Core)</li>
<li>Install m2eclipse http://download.eclipse.org/technology/m2e/releases (Maven
Integration and Maven optional components)</li>
</ul>
<p><a name="BuildingAries-BuildatthecommandlinethenimportintoEclipseifyouneedEclipse."></a></p>
<h2 id="build-at-the-command-line-then-import-into-eclipse-if-you-need-eclipse">Build at the command line then import into Eclipse if you need Eclipse.</h2>
<p>This is the easiest way to build Aries and then work on the modules using
Eclipse. If you don't care about Eclipse go to the next section.</p>
<ul>
<li>check out from the command line: svn co
https://svn.apache.org/repos/asf/aries/trunk aries</li>
<li>cd aries</li>
<li>cd parent</li>
<li>mvn clean install</li>
<li>cd ../eba-maven-plugin</li>
<li>mvn clean install (<em>See note below</em>)</li>
<li>cd ..</li>
<li>mvn clean install</li>
<li>mvn eclipse:eclipse (should see 'BUILD SUCCESSFUL' message)</li>
<li>fire up eclipse and switch to the Java perspective</li>
<li>import the projects. File-&gt;import-&gt;General-&gt;existing projects into
workspace. Import 'blueprint, 'jndi', 'testsupport' and 'transaction'</li>
</ul>
<p>If everything looks good run a  maven build with the target 'install' (adds
jars to your local repository) or 'package' (just creates jars in your
workspace). Hit F5 in the package explorer view to refresh and you should
see packaged jar files under the <em>target</em> directories in the projects.</p>
<p><br></p>
<hr />
<p><strong>Note:</strong>
Note: There is currently (September 2010) what appears to be a timing issue
that is causing unpredictable test failures during a full build. If you see
test failures, try 'mvn install -fae'</p>
<hr />
<p><a name="BuildingAries-Justbuildit-noEclipse"></a></p>
<h2 id="just-build-it-no-eclipse">Just build it - no Eclipse</h2>
<ul>
<li>check out from the command line: svn co
https://svn.apache.org/repos/asf/aries/trunk aries</li>
<li>cd aries</li>
<li>cd parent</li>
<li>mvn clean install</li>
<li>cd ../eba-maven-plugin</li>
<li>mvn clean install</li>
<li>cd ..</li>
<li>mvn clean</li>
<li><em>mvn -fn install</em> (-fn continues after failures), or {{mvn -fn
package}} (alternatively, you can disable the tests with {{mvn
-Dmaven.test.skip=true install}} with the side-effect of making the build
process much faster)</li>
</ul>
<p><a name="BuildingAries-Eclipseonly"></a></p>
<h2 id="eclipse-only">Eclipse only</h2>
<p>This should work if you are command-line averse. On the other hand it seems
to be the best way to get into a mess with the M2Eclipse plugin.</p>
<ul>
<li>In the SVN view, add the aries repository
https://svn.apache.org/repos/asf/aries</li>
<li>Expand the repository, right click on trunk and take 'check out as Maven
project'
There will be errors in the projects. To fix these:</li>
<li>Right click on pom/xml in the aries project, select 'run as Maven
build....'</li>
<li>Type 'clean' in as the build goal</li>
<li>Repeat the process using 'eclipse:eclipse' as the build goals'</li>
<li>Close and re-open all the projects</li>
</ul>
<p>If there are still failures see the "Fixing failures" step below. If
everything looks good run a final maven build with the target 'install'
(adds jars to your local repository) or 'package' (just creates jars in
your workspace). Hit F5 in the package explorer view to refresh and you
should see packaged jar files under the <em>target</em> directories in the
projects.</p>
<p><a name="BuildingAries-Fixingfailures"></a></p>
<h2 id="fixing-failures">Fixing failures</h2>
<p><a name="BuildingAries-InEclipse"></a></p>
<h5 id="in-eclipse">In Eclipse</h5>
<p>You will see some of the blueprint projects don't build. To fix this you
need to comment out the following line:</p>
<div class="codehilite"><pre><span class="o">&lt;!--</span> <span class="o">&lt;</span><span class="n">classpathentry</span> <span class="n">kind</span><span class="o">=</span><span class="s">&quot;src&quot;</span>
<span class="n">path</span><span class="o">=</span><span class="s">&quot;/Users/linsun/aries/blueprint/blueprint-api/src/main/resources/org/osgi/service/blueprint&quot;</span>
<span class="n">including</span><span class="o">=</span><span class="s">&quot;blueprint.xsd&quot;</span> <span class="n">excluding</span><span class="o">=</span><span class="s">&quot;**/*.java&quot;</span><span class="o">/&gt;</span> <span class="o">--&gt;</span>
</pre></div>


<p>in the .classpath file in the aries-blueprint-core project.</p>
<p>If there is a build error in the org.apache.aries.blueprint.itests project
then remove this jar:</p>
<div class="codehilite"><pre><span class="n">org</span><span class="sr">/apache/</span><span class="n">felix</span><span class="sr">/org.osgi.foundation/</span><span class="mf">1.2.0</span><span class="o">.</span><span class="n">jar</span>
</pre></div>


<p>from the project's classpath.</p>
<p>If there is a build error in the aries-jmx-core project then configure this
project's build path to add the JRE System Library to Java Build Path.</p>
<p>There should be no outstanding errors.</p>
<p><a name="BuildingAries-Outofmemoryerrors"></a></p>
<h5 id="out-of-memory-errors">Out of memory errors</h5>
<p>You may find that building Aries fails with out of memory exceptions on
some systems (eg Mac)  if you use the standard Java settings. Setting the
two environment variables as shown below may help.</p>
<div class="codehilite"><pre><span class="n">export</span> <span class="n">MAVEN_OPTS</span><span class="o">=</span><span class="s">&quot;-XX:MaxPermSize=128m -Xms512m -Xmx512m</span>
<span class="s">-XX:+HeapDumpOnOutOfMemoryError&quot;</span>
<span class="n">export</span> <span class="n">JAVA_OPTS</span><span class="o">=</span><span class="s">&quot;-Xmx1024m -XX:MaxPermSize=128m</span>
<span class="s">-XX:+HeapDumpOnOutOfMemoryError&quot;</span>
</pre></div></div>
            <!-- Content -->
          </td>
        </tr>
      </table>
   </td>
   <td id="cell-2-2" colspan="2">&nbsp;</td>
  </tr>
  <tr width="100%">
   <td id="cell-3-0">&nbsp;</td>
   <td id="cell-3-1">&nbsp;</td>
   <td id="cell-3-2">
     <div id="footer">
       <!-- Footer -->
       <div id="site-footer">
         <a href="http://aries.apache.org/privacy-policy.html";>Privacy
Policy</a> 
       </div>
       <!-- Footer -->
     </div>
   </td>
   <td id="cell-3-3">&nbsp;</td>
   <td id="cell-3-4">&nbsp;</td>
  </tr>
  <tr width="100%">
    <td id="cell-4-0" colspan="2">&nbsp;</td>
    <td id="cell-4-1">&nbsp;</td>
    <td id="cell-4-2" colspan="2">&nbsp;</td>
  </tr>
</table>
</body>
</html> 
