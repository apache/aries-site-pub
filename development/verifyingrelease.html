<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd";>
<!--
    Licensed to the Apache Software Foundation (ASF) under one or more
    contributor license agreements. See the NOTICE file distributed with
    this work for additional information regarding copyright ownership.
    The ASF licenses this file to You under the Apache License, Version 2.0
    (the "License"); you may not use this file except in compliance with
    the License. You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
-->
<html>
  <head>
    <link rel="shortcut icon" href="http://aries.apache.org/images/favicon.ico"></link>
    <link type="text/css" rel="stylesheet" href="http://aries.apache.org/resources/site.css"></link>
    </script><script src="http://aries.apache.org/resources/menus.js" language="javascript" type="text/javascript"></script>
  <meta name="keywords" content="..."/>
  <meta name="description" content="..." />
    <title>
    Apache Aries - 
    </title>
  </head>
<body onload="SetMenu()">

<table width="100%" cellpadding="0" cellspacing="0">
  <tr width="100%">
    <td id="cell-0-0" colspan="2">&nbsp;</td>
    <td id="cell-0-1">&nbsp;</td>
    <td id="cell-0-2" colspan="2">&nbsp;</td>
  </tr>
  <tr width="100%">
    <td id="cell-1-0">&nbsp;</td>
    <td id="cell-1-1">&nbsp;</td>
    <td id="cell-1-2">
      <div style="padding: 5px;">
        <div id="banner">
          <!-- Banner -->
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr>
          <td align="left" class="topbardiv" nowrap="">
            <a href="http://aries.apache.org/" title="Apache Aries"> <img border="0" src="http://aries.apache.org/images/Arieslogo_Horizontal.gif"> </a>
          </td>
          <td align="right" nowrap="">
            <a href="http://www.apache.org/" title="The Apache Software Foundation"> <img border="0" src="http://aries.apache.org/images/apache_feather.png"> </a>
              </td>
        </tr>
      </table>
          <!-- Banner -->
        </div>
      </div>
      <div id="top-menu">
        <table border="0" cellpadding="1" cellspacing="0" width="100%">
          <tr>
            <td>
              <div align="left">
                <!-- Breadcrumbs -->
                <!-- Breadcrumbs -->
              </div>
            </td>
            <td>
              <div align="right">
                <!-- Quicklinks -->
          <DIV style="padding: 5px 5px 0px 25px;">
            <FORM action="http://www.google.com/search" method="get" style="font-size: 10px;">
            <A href="http://www.apache.org/licenses/LICENSE-2.0.html" class="external-link" rel="nofollow">License</A> 
            <INPUT name="ie" type="hidden" value="UTF-8"></INPUT>
            <INPUT name="oe" type="hidden" value="UTF-8"></INPUT>
            <INPUT maxlength="255" name="q" size="15" type="text" value></INPUT>
            <INPUT name="btnG" type="submit" value="Search"></INPUT>
            <INPUT name="domains" type="hidden" value="aries.apache.org"></INPUT>
            <INPUT name="sitesearch" type="hidden" value="aries.apache.org"></INPUT>
            </FORM>
          </DIV>
                <!-- Quicklinks -->
              </div>
            </td>
          </tr>
        </table>
      </div>
    </td>
    <td id="cell-1-3">&nbsp;</td>
    <td id="cell-1-4">&nbsp;</td>
  </tr>
  <tr width="100%">
    <td id="cell-2-0" colspan="2">&nbsp;</td>
    <td id="cell-2-1">
      <table>
        <tr height="100%" valign="top">
          <td height="100%">
            <div id="wrapper-menu-page-right">
              <div id="wrapper-menu-page-top">
                <div id="wrapper-menu-page-bottom">
                  <div id="menu-page">
                    <!-- NavigationBar -->
          <style type="text/css">
/* The following code is added by mdx_elementid.py
   It was originally lifted from http://subversion.apache.org/style/site.css */
/*
 * Hide class="elementid-permalink", except when an enclosing heading
 * has the :hover property.
 */
.headerlink, .elementid-permalink {
  visibility: hidden;
}
h2:hover > .headerlink, h3:hover > .headerlink, h1:hover > .headerlink, h6:hover > .headerlink, h4:hover > .headerlink, h5:hover > .headerlink, dt:hover > .elementid-permalink { visibility: visible }</style>
<div onclick="SwitchMenu('documentation')" id="documentationTitle" class="menutitle">Documentation</div>

<div id="documentation" class="menuitemgroup">
    <div class="menuitem">
        <a href="/documentation/integrators-guide.html">Integrators Guide</a> 
    </div>
    <div class="menuitem">
        <a href="/documentation/articles.html">Articles</a> 
    </div>
    <div class="menuitem">
        <a href="https://svn.apache.org/repos/asf/aries/slides/">Slides</a> 
    </div>
    <div class="menuitem">
        <a href="/documentation/tutorials.html">Tutorials</a> 
    </div>
    <div class="menuitem">
        <a href="/documentation/tools.html">Tools</a> 
    </div>
</div>

<div onclick="SwitchMenu('modules')" id="modulesTitle" class="menutitle">Modules</div>

<div id="modules" class="menuitemgroup">
    <div class="menuitem">
        <a href="/modules/samples.html">Samples</a> 
    </div>
    <div class="menuitem">
        <a href="/modules/async-svcs.html">Asynchronous Services</a> 
    </div>
    <div class="menuitem">
        <a href="/modules/blueprint.html">Blueprint</a> 
    </div>
    <div class="menuitem">
        <a href="/modules/blueprint-maven-plugin.html">blueprint-maven-plugin</a> 
    </div>
    <div class="menuitem">
        <a href="/modules/blueprintannotation.html">Blueprint Annotations</a>
    </div>
    <div class="menuitem">
        <a href="/modules/blueprintnoosgi.html">Blueprint No-OSGi</a>
    </div>
    <div class="menuitem">
        <a href="/modules/blueprintweb.html">Blueprint Web</a>
    </div>
    <div class="menuitem">
        <a href="/modules/esaanttask.html">ESA Ant Task </a> 
    </div>
    <div class="menuitem">
        <a href="/modules/ebamavenpluginproject.html">EBA Maven Plugin </a> 
    </div>
    <div class="menuitem">
        <a href="/modules/esamavenpluginproject.html">ESA Maven Plugin </a> 
    </div>
    <div class="menuitem">
        <a href="/modules/jmx.html">JMX</a> 
    </div>
    <div class="menuitem">
        <a href="/modules/jndiproject.html">JNDI</a> 
    </div>
    <div class="menuitem">
        <a href="/modules/jpaproject.html">JPA</a> 
    </div>
    <div class="menuitem">
        <a href="/modules/transactionsproject.html">Transactions</a> 
    </div>
    <div class="menuitem">
        <a href="/modules/spi-fly.html">SPI Fly</a> 
    </div>
    <div class="menuitem">
        <a href="/modules/subsystems.html">Subsystems</a> 
    </div>
    <div class="menuitem">
        <a href="/modules/applications.html">Applications (obsolete)</a> 
    </div>
</div>

<div onclick="SwitchMenu('downloads')" id="downloadsTitle" class="menutitle">Downloads</div>

<div id="downloads" class="menuitemgroup">
    <div class="menuitem">
        <a href="/downloads/currentreleases.html">Current Releases</a> 
    </div>
    <div class="menuitem">
        <a href="/downloads/testresults.html">Compliance Tests</a> 
    </div>
    <div class="menuitem">
        <a href="/downloads/archived-releases.html">Archived Releases</a> 
    </div>
</div>

<div onclick="SwitchMenu('community')" id="communityTitle" class="menutitle">Community</div>

<div id="community" class="menuitemgroup">
    <div class="menuitem">
        <a href="/community/resources.html">Community Resources</a> 
    </div>
    <div class="menuitem">
        <a href="/community/gettinginvolved.html">Getting Involved</a> 
    </div>
    <div class="menuitem">
        <a href="/community/people.html">Who we are</a> 
    </div>
    <div class="menuitem">
        <a href="/community/boardreports.html">Board Reports</a> 
    </div>
        <div class="menuitem">
                <a href="/community/logos.html">Logos for Users</a>
        </div>
</div>

<div onclick="SwitchMenu('development')" id="developmentTitle" class="menutitle">Development</div>

<div id="development" class="menuitemgroup">
    <div class="menuitem">
        <a href="/development/buildingaries.html">Building Aries </a> 
    </div>
    <div class="menuitem">
        <a href="/development/guidelines.html">Cording Guidelines</a> 
    </div>
    <div class="menuitem">
        <a href="/development/architecture.html">Architecture</a> 
    </div>
    <div class="menuitem">
        <a href="/development/releasingaries.html">Releasing Aries </a> 
    </div>
    <div class="menuitem">
        <a href="/development/compliancetesting.html">OSGi Compliance Tests </a> 
    </div>
    <div class="menuitem">
        <a href="/development/maintainingthewebpages.html">Web Site Maintenance </a> 
    </div>
</div>

<div onclick="SwitchMenu('sponsorship')" id="sponsorshipTitle" class="menutitle">Sponsorship</div>

<div id="sponsorship" class="menuitemgroup">
    <div class="menuitem">
        <a href="http://www.apache.org/foundation/thanks.html">Thanks</a> 
    </div>
    <div class="menuitem">
        <a href="http://www.apache.org/foundation/sponsorship.html">Sponsoring Apache</a> 
    </div>
</div>
                    <!-- NavigationBar -->
                  </div>
                </div>
              </div>
            </div>
          </td>
          <td height="100%" width="100%">
            <!-- Content -->
            <div class="wiki-content"><style type="text/css">
/* The following code is added by mdx_elementid.py
   It was originally lifted from http://subversion.apache.org/style/site.css */
/*
 * Hide class="elementid-permalink", except when an enclosing heading
 * has the :hover property.
 */
.headerlink, .elementid-permalink {
  visibility: hidden;
}
h2:hover > .headerlink, h3:hover > .headerlink, h1:hover > .headerlink, h6:hover > .headerlink, h4:hover > .headerlink, h5:hover > .headerlink, dt:hover > .elementid-permalink { visibility: visible }</style>
<h1 id="verifying-release-artifacts">Verifying Release Artifacts<a class="headerlink" href="#verifying-release-artifacts" title="Permanent link">&para;</a></h1>
<p>This page provides some help for anyone who wants to verify release candidate artifacts so they feel they can genuinely vote on the related vote thread on the dev list. It is not intended to be exhaustive instructions. It's a list of things people have generally found to be useful to do when checking the artifacts.</p>
<p>It is essential that the signatures and hashsums are good. Please do read <a href="http://httpd.apache.org/dev/verification.html">Verifying Apache HTTP Server Releases</a> for information on why you should verify releases.. </p>
<p>These instructions have been rolled up into a script, which you can run instead. Cut and paste the following:</p>
<div class="codehilite"><pre><span class="n">wget</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">check</span><span class="o">-</span><span class="n">certificate</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">svn</span><span class="p">.</span><span class="n">apache</span><span class="p">.</span><span class="n">org</span><span class="o">/</span><span class="n">repos</span><span class="o">/</span><span class="n">asf</span><span class="o">/</span><span class="n">aries</span><span class="o">/</span><span class="n">scripts</span><span class="o">/</span><span class="n">verify_staged_release</span><span class="p">.</span><span class="n">sh</span>
<span class="n">chmod</span> <span class="n">a</span><span class="o">+</span><span class="n">x</span> <span class="n">verify_staged_release</span><span class="p">.</span><span class="n">sh</span>
<span class="o">./</span><span class="n">verify_staged_release</span><span class="p">.</span><span class="n">sh</span> <span class="p">[</span><span class="n">RELEASE</span><span class="o">-</span><span class="n">NUM</span><span class="p">]</span> <span class="n">mytempdirectory</span> 2<span class="o">&gt;&amp;</span>1 <span class="o">|</span> <span class="n">tee</span> <span class="n">verifyresults</span><span class="p">.</span><span class="n">txt</span>
<span class="n">grep</span> <span class="n">FAIL</span> <span class="n">verifyresults</span><span class="p">.</span><span class="n">txt</span>
<span class="n">grep</span> <span class="n">ERROR</span> <span class="n">verifyresults</span><span class="p">.</span><span class="n">txt</span>
</pre></div>


<h2 id="have-i-got-the-keys">Have I got the KEYS?<a class="headerlink" href="#have-i-got-the-keys" title="Permanent link">&para;</a></h2>
<p>To verify Aries release artifacts you need the public keys for the Aries committers.
The master KEYS file is in Subversion. The easiest way of getting it from the command line is to non-recursively check-out the files in the top level of the Aries location using:</p>
<div class="codehilite"><pre><span class="n">svn</span> <span class="n">checkout</span> <span class="o">-</span><span class="n">N</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">svn</span><span class="p">.</span><span class="n">apache</span><span class="p">.</span><span class="n">org</span><span class="o">/</span><span class="n">repos</span><span class="o">/</span><span class="n">asf</span><span class="o">/</span><span class="n">aries</span>
</pre></div>


<p>You then need to import the keys into PGP:</p>
<div class="codehilite"><pre><span class="n">gpg</span> <span class="o">--</span><span class="n">import</span> <span class="n">KEYS</span>
</pre></div>


<h2 id="download-artifacts">Download artifacts<a class="headerlink" href="#download-artifacts" title="Permanent link">&para;</a></h2>
<p>For each 'useful' file there are several others created to help you determine whether it's genuine. The PGP signature .asc file shows who created the 'useful' file. Then there are checksum files (.md5 and .sha1) for both the 'useful' file and the .asc file. To download the content for the repository you're verifying try this:</p>
<div class="codehilite"><pre><span class="n">wget</span> <span class="o">-</span><span class="n">e</span> <span class="n">robots</span><span class="p">=</span><span class="n">off</span> <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">check</span><span class="o">-</span><span class="n">certificate</span> <span class="o">-</span><span class="n">np</span> <span class="o">-</span><span class="n">r</span> <span class="o">-</span><span class="n">nH</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">repository</span><span class="p">.</span><span class="n">apache</span><span class="p">.</span><span class="n">org</span><span class="o">/</span><span class="n">content</span><span class="o">/</span><span class="n">repositories</span><span class="o">/</span><span class="n">orgapachearies</span><span class="o">-</span><span class="n">xxx</span><span class="o">/</span><span class="n">org</span><span class="o">/</span><span class="n">apache</span><span class="o">/</span><span class="n">aries</span><span class="o">/</span>
</pre></div>


<p>where xxx is the number of the repository you're verifying.</p>
<p>wget will download the files into a directory called content. The following use of the 'find' command assumes the downloads are in the 'content' directory.</p>
<h2 id="verify-the-artifacts">Verify the artifacts<a class="headerlink" href="#verify-the-artifacts" title="Permanent link">&para;</a></h2>
<p>Ensure the checksums are right for the released files. Copy/paste this into the command line:</p>
<div class="codehilite"><pre><span class="k">for</span> <span class="nb">i</span> <span class="n">in</span> `<span class="nb">find</span> <span class="n">content</span> <span class="o">-</span><span class="n">type</span> <span class="n">f</span> <span class="o">|</span> <span class="n">egrep</span> <span class="o">-</span><span class="n">v</span> <span class="s">&#39;.md5$|.sha1$|index.html|maven-metadata.xml&#39;</span>`
<span class="n">do</span>
    <span class="n">mymd5</span><span class="p">=</span>`<span class="n">md5sum</span> $<span class="nb">i</span><span class="o">|</span><span class="n">cut</span> <span class="o">-</span><span class="n">c1</span><span class="o">-</span>32`
    <span class="n">repomd5</span><span class="p">=</span>`<span class="nb">cat</span> $<span class="nb">i</span><span class="p">.</span><span class="n">md5</span>`
    <span class="k">if</span> <span class="p">[</span> &quot;$<span class="n">mymd5</span>&quot; <span class="o">==</span> &quot;$<span class="n">repomd5</span>&quot; <span class="p">]</span>
    <span class="n">then</span>
        <span class="n">echo</span> &quot;<span class="n">GOOD</span> <span class="n">MD5</span> <span class="k">for</span> $<span class="nb">i</span>&quot;
    <span class="k">else</span>
        <span class="n">echo</span> &quot;<span class="o">*</span><span class="n">BAD</span> <span class="n">MD5</span> <span class="k">for</span> $<span class="nb">i</span> <span class="o">*****</span>&quot;
    <span class="n">fi</span>
<span class="n">done</span>
</pre></div>


<p>(On the Mac, use <code>md5 -q</code> instead of <code>md5sum</code> and the cut.)</p>
<p>Do something similar for sha1:</p>
<div class="codehilite"><pre><span class="k">for</span> <span class="nb">i</span> <span class="n">in</span> `<span class="nb">find</span> <span class="n">content</span> <span class="o">-</span><span class="n">type</span> <span class="n">f</span> <span class="o">|</span> <span class="n">egrep</span> <span class="o">-</span><span class="n">v</span> <span class="s">&#39;.md5$|.sha1$|index.html|maven-metadata.xml&#39;</span>`
<span class="n">do</span>
    <span class="n">mysha1</span><span class="p">=</span>`<span class="n">sha1sum</span> $<span class="nb">i</span><span class="o">|</span><span class="n">cut</span> <span class="o">-</span><span class="n">c1</span><span class="o">-</span>40`
    <span class="n">reposha1</span><span class="p">=</span>`<span class="nb">cat</span> $<span class="nb">i</span><span class="p">.</span><span class="n">sha1</span>`
    <span class="k">if</span> <span class="p">[</span> &quot;$<span class="n">mysha1</span>&quot; <span class="o">==</span> &quot;$<span class="n">reposha1</span>&quot; <span class="p">]</span>
    <span class="n">then</span>
        <span class="n">echo</span> &quot;<span class="n">GOOD</span> <span class="n">SHA1</span> <span class="k">for</span> $<span class="nb">i</span>&quot;
    <span class="k">else</span>
        <span class="n">echo</span> &quot;<span class="o">*</span><span class="n">BAD</span> <span class="n">SHA1</span> <span class="k">for</span> $<span class="nb">i</span> <span class="o">*****</span>&quot;
    <span class="n">fi</span>
<span class="n">done</span>
</pre></div>


<p>(On the Mac, use <code>openssl sha1</code> instead of <code>sha1sum</code>.)</p>
<p>Ensure the PGP signature files are good. See the <a href="http://httpd.apache.org/dev/verification.html#Validating">Validating section of Verifying Apache HTTP Server Releases</a> for background on validating the authenticity of a key.</p>
<div class="codehilite"><pre><span class="k">for</span> <span class="nb">i</span> <span class="n">in</span> `<span class="nb">find</span> <span class="n">content</span> <span class="o">-</span><span class="n">type</span> <span class="n">f</span> <span class="o">|</span> <span class="n">egrep</span> <span class="s">&#39;.asc$&#39;</span>`
<span class="n">do</span>
    <span class="n">gpg</span> $<span class="nb">i</span>
<span class="n">done</span>
</pre></div>


<p>You shouldn't get any errors.</p>
<h2 id="build-the-code">Build the code<a class="headerlink" href="#build-the-code" title="Permanent link">&para;</a></h2>
<p>It's a good idea to check the source release zip builds. Unzip it first:</p>
<div class="codehilite"><pre><span class="nb">find</span> <span class="p">.</span> <span class="o">-</span><span class="n">name</span> <span class="o">*-</span><span class="n">source</span><span class="o">-</span><span class="n">release</span><span class="p">.</span><span class="n">zip</span> <span class="o">|</span><span class="n">xargs</span> <span class="o">-</span><span class="n">n</span> 1 <span class="n">unzip</span>
</pre></div>


<p>Go into each subdir created and run:</p>
<div class="codehilite"><pre><span class="n">mvn</span> <span class="n">clean</span> <span class="n">install</span>
</pre></div>


<h2 id="rat-check">RAT check<a class="headerlink" href="#rat-check" title="Permanent link">&para;</a></h2>
<p>It's also a good idea to run the <a href="http://incubator.apache.org/rat/">Apache RAT (Release Audit Tool)</a>. The Aries POMs are set up so you can do:</p>
<div class="codehilite"><pre><span class="n">mvn</span> <span class="o">-</span><span class="n">fn</span> <span class="o">-</span><span class="n">Prat</span>
</pre></div>


<p>Note: currently RAT fails due to the generated DEPENDENCIES file not containing a license. It's safe to ignore this as the file is generated. So in order to ensure RAT checks all subdirectories, use the -fn. Then check any failures with</p>
<div class="codehilite"><pre><span class="nb">find</span> <span class="p">.</span> <span class="o">-</span><span class="n">name</span> <span class="o">\*</span><span class="p">.</span><span class="nb">rat</span> <span class="o">|</span> <span class="n">xargs</span> <span class="n">grep</span> <span class="o">\</span>!<span class="o">\</span>?<span class="o">\</span>?
</pre></div></div>
            <!-- Content -->
          </td>
        </tr>
      </table>
   </td>
   <td id="cell-2-2" colspan="2">&nbsp;</td>
  </tr>
  <tr width="100%">
   <td id="cell-3-0">&nbsp;</td>
   <td id="cell-3-1">&nbsp;</td>
   <td id="cell-3-2">
     <div id="footer">
       <!-- Footer -->
       <div id="site-footer">
         <a href="http://aries.apache.org/privacy-policy.html";>Privacy
Policy</a> 
       </div>
       <!-- Footer -->
     </div>
   </td>
   <td id="cell-3-3">&nbsp;</td>
   <td id="cell-3-4">&nbsp;</td>
  </tr>
  <tr width="100%">
    <td id="cell-4-0" colspan="2">&nbsp;</td>
    <td id="cell-4-1">&nbsp;</td>
    <td id="cell-4-2" colspan="2">&nbsp;</td>
  </tr>
</table>
</body>
</html> 
